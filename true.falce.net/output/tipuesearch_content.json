{"pages":[{"url":"http://true.falce.net/comment-avoir-plusieurs-services-web-sur-son-serveur.html","text":"C'est le genre de questions bêtes que l'on se pose quand on débute. Les tutoriels parlent de configuration de serveurs et on ne comprend pas l'intérêt réel. La philosophie de l'article est plus de découvrir le principe que de fournir une solution clef en main :) Le problème J'ai un serveur web (un ordinateur), sur lequel tourne un serveur web (un logiciel, NGINX ) qui sert mon site web, sur le port 80 donc. Maintenant imaginons que je veuille développer une application web, en Python/Flask par exemple. L'application va écouter sur un certain port, disons 12345 . Je peux y accéder en faisant http://monip:12345 . Bon jusque là rien de nouveau sous le soleil. Mais ce n'est pas très sérieux : ça fait peut aux gens d'accéder à un port précis, ils n'ont pas l'habitude et ne se connecterons pas c'est plus simple de se souvenir d'un nom que d'un chiffre aléatoire Une meilleure solution c'est d'accéder à http://monip/monapp ou http://monapp.monip plutôt que sur un port. Sauf que le serveur web est déjà attaché au port 80 et qu'un seul processus peut se connecter sur un port. La solution Pré-requis Je pars du principe que vous utilisez un Linux et avez installé un serveur web ( NGINX ou Apache) qui fonctionne. Même si vous n'avez encore rien configuré parce que vous ne pigez rien aux tutos. Les examples se baseront sur NGINX . Un proxy inverse Nous allons utiliser un reverse proxy géré par votre serveur web. Mais c'est quoi donc ? C'est simple, le proxy va recevoir toutes les requêtes (les URL tapées par les visiteurs) et va les transmettre à un serveur web selon certaines règles. Pour comprendre les exemples, il faut partir du principe que les connexions reçues par le proxy ne contiennent plus le nom de domaine. C'est à dire, pour NGINX www.monsite.com/maPage sera vu comme /maPage . Voilà un exemple pour NGINX . Il faut rajouter ces directives dans un fichier de configuration dans /etc/nginx/site-available/ , dans un bloc server : location / { proxy_pass http :// localhost : 12345 / ; } Ainsi, toutes les requêtes commençant par / (c'est à dire toutes) seront renvoyées au port 12345 (ce qui est intéressant si vous utilisez des sous domaines par exemple). Dans le cas où vous voulez transférer les connexions sur /monapp vers le port 12345 , vous devrez avoir une règle dans le genre : location / monapp / { proxy_pass http :// 127 . 0 . 0 . 1 : 12345 / ; } Dans ce cas, une URL vers monip/monapp/page1 sera transmise vers 127.0.01:12345/page1 (avec 127.0.0.1, le localhost du serveur). Attention, n'oubliez pas le / final, il permet d'éliminer le /monapp de l' URL . Grâce à lui votre application écoutant sur le port 12345 pourra analyser ses URL à partir de la racine comme si rien ne s'était passé. Les variables spéciales Comme on le voit sur le schéma, le proxy est situé sur votre réseau et va transmettre les requêtes, ce qui modifier les headers HTTP . Du coup, vous ne pouvez plus savoir quelle est l' IP de votre visiteur par exemple, vu qu'elle sera remplacée par celle indiquée dans le proxy_pass (le plus souvent 127.0.0.1). Dans ce cas, vous pouvez rajouter des variables qui permettent de remodifier le header. location /monapp/ { ... proxy_set_header Host $ host ; proxy_set_header X-Real-IP $ remote_addr ; proxy_set_header X-Forwarded-For $ proxy_add_x_forwarded_for ; ... } Conclusion L'exemple complet : location / monapp / { proxy_pass http :// 127 . 0 . 0 . 1 : 12345 / ; proxy_set_header Host $ host ; proxy_set_header X - Real - IP $ remote_addr ; proxy_set_header X - Forwarded - For $ proxy_add_x_forwarded_for ; } Finalement, il est assez aisé de faire fonctionner plusieurs services web sur son serveur en utilisant NGINX . De plus, la configuration est assez aisé, 10 lignes à rajouter dans un fichier au maximum. Il ne faut donc pas se laisser dépasser par la complexité relative de NGINX , ou d'un serveur web en général (il y a des centaines de directives et de variables). Il faut juste y aller petit à petit et se concentrer sur une configuration à la fois. Pour aller plus loin nous pouvons servir des contenus statiques avec location un tutoriel pour débutants (en anglais) pour en savoir plus sur les variables du proxy_set_header","tags":"Admin Sys","title":"Comment avoir plusieurs services web sur son serveur ?"},{"url":"http://true.falce.net/decouverte-de-la-gopro-hero-4.html","text":"L'histoire Je suis allé à l' OVH Summit 2015 à Paris. C'était bien sympa, bien que je ne pense pas être la cible de l'événement avec mes 30€ de dépenses par an… Une des choses qui a rendu l'événement sympa c'est les tirages au sort et tombolas, organisés par Cisco, Intel et d'autres boites que je ne connais pas. J'ai joué. Et j'ai gagné \\o/ Une GoPro. Double yeah \\o/ \\o/ Il y avait même un accessoire pour faire des selfies. Donc voilà un retour après 1 jour d'utilisation. Ma vie Je ne pense pas être clairement la cible de GoPro, je ne fais pas de saut en wingsuit ou de plongé extrême. Le sport le plus extrême que j'ai pratiqué c'est soit le tir à l'arc, soit le yoga. Du coup, je me demande bien ce que je peux filmer :) Je fais partie des personnes qui n'ont jamais touché de GoPro. Je sais que ça existe, l'on peut faire des pubs pour rebbull qui passent au cinéma avec (du coup, ça doit être plutôt correct niveau qualité) mais c'est tout. Par contre, je fais de la photo. J'ai un reflex (un vieux D90) du coup, je deviens assez exigeant sur la vitesse et la qualité des photos. Et je n'ai jamais eu de caméscope, je ne suis donc pas trop habitué à manipuler des fichiers vidéos. Du coup, plutôt que tout revendre, autant tester et voir le potentiel de la chose. Déballage L'emballage est plutôt qualitatif. La boite est en 2 parties, une transparente qui permet de voir la caméra et une avec les instructions, câbles et tout le tralala. A l'ouverture la GoPro est dans sa coque de protection. On a donc affaire à son système de fixation, à base de vis, qui sert à attacher la caméra à presque tout. Au début j'ai rien compris, j'ai galéré mais on s'y fait et c'est bien conçu. C'est facile à attacher et détacher et ça à l'air de bien tenir. 2 attaches à scotch sont fournies, pour les casques. Une fois que l'on a réussit à la défaire, ce qui choque, c'est la taille de la caméra. Avec la coque elle n'est pas très grosse (une grosse boite d'allumettes), mais nue, elle est franchement petite et légère. Plutôt impressionnant pour un truc qui monte à 12M de pixels et filme 4K. La boite contient donc la GoPro, une housse avec 3 \"portes arrières\", selon que l'on veut nager très profond (40m), pas trop profond (3m) ou rester sur terre (en gros). L'écran de la caméra est tactile et seule la porte étanche jusqu'à 40m ne permet pas de l'utiliser. Je met en charge la batterie et je feuillète le manuel. La batterie est pleine, super, on peut commencer. Ah beh non, on peut rien faire sans carte µ SD et elle n'est pas fournie :( Il y a 2 écrans : devant, en noir et blanc et d'environ 10 pixels (un peu plus) qui doit être hérité des anciennes GoPro. Il permet de faire les réglages et de voir les infos basiques (la batterie et le nombre de photos / temps de vidéo restant) derrière en couleur, tactile, qui permet de voir les photos et de faire les réglages Il y a 3 boutons : un pour prendre des photos, lancer la vidéo un pour allumer / éteindre et ils permettent de naviguer dans les menus (pour quand on n'utilise pas le tactile) L'utilisation Le manuel parle d'une application GoPro à installer sur son smartphone pour mettre à jour le firmware de la caméra. J'ai peur mais j'essaie. L'appairage se fait facilement (la GoPro crée un hotspot et l'application s'y connecte automatiquement), et la mise à jour se passe tranquillement (10 min, et ça n'a même pas planté). L'appli est agréable à utiliser, on peut également régler les différents L'application permet d'avoir une idée de ce que voit la caméra, j'imagine que c'est utile pour savoir ce qu'elle filme quand on l'a sur son casque. Sinon, c'est pas vraiment utilisable, il y a environ 2 sec de latence. Mais c'est sympa En parlant de latence, il n'y en a pas dans les menus, mais je trouve qu'il y en un petit peu pour les déclenchements de prises de vue (l'habitude du reflex). Si vous avez l'habitude d'un compact ou d'un téléphone et que ça ne gène pas, ça devrait aller. Niveau cadence, on peut filmer en 240 fps (en basse définition) ça rend bien pour les moments qui bougent ou pour les ralentis et on peut faire des rafales photos à 30 images par seconde. Niveau technique c'est simple mais plutôt réussit. L'objectif est un grand angle, ce qui a des avantages (on voit plein de choses, les déformations) et des inconvénients (les déformations, tout ce qui est à plus de 4m sera minuscule). Oui, les déformations sont un avantage et un inconvénient :) En mode film, on peut avoir un champ de vision plus étroit, je pense que la caméra ne prend que les pixels centraux du capteur (on n'a plus accès à la 4K). On ne peut pas régler l'exposition, mais on peut faire une mesure spot, qui adapte l'expo en fonction de la luminosité du centre de l'image. Et on peut sous / sur exposer. On peut régler les iso max à utiliser et la netteté. On a aussi accès à des modes sympas comme le time lapse (en photo et vidéo), on peut régler l'intervalomètre dans des valeurs définies (1 image toutes les 1-5-10-30 secondes). En vidéo, j'ai testé un couché de soleil et ça rend pas mal, un peu surexposé au début (le soleil n'étant pas au centre), mais il n'y a pas de scintillements, l'expo se refait au poil à chaque fois. Avis Pas étonnant que la GoPro soit un succès. La construction semble solide, l'interface est bien foutue, conçue pour être utilisée avec des gants, sous l'eau, donc sur terre et à main nue elle est agréable. La qualité d'image est au rendez-vous, clairement au dessus d'un téléphone, mais clairement en dessous d'un reflex, je dirai que l'on est au niveau d'un bon compact. Il ne faut pas oublier que la caméra est prévue pour faire des vidéos et que je n'ai surtout testé que la photo. Le grand angle est vraiment intéressant pour les vidéos d'action, histoire de se croire à la place du \"héro\". La petite taille permet de la transporter facilement, en attirant moins l'attention qu'un gros reflex. Ce qui peut s'avérer utile en voyage, même sans faire de saut en parachute ;) Mais par contre, les vidéos que l'on voit sont toutes filmées en plein jour. Ça ne m'étonnes pas, les résultats que j'ai eu en photo de nuit, se sont avérés assez décevant, beaucoup de flou ou photo mal exposé, je ne sais pas trop ce que ça donne en vidéo la nuit. Les seuls vrais reproche que je ferrai pour l'instant sont sur la batterie, l'alimentation et la chaleur dégagée. Un cable µ USB (ceux des téléphones) aurait été plus judicieux à mon avis. La durée de vie me semble courte (dans les 4-5h d'utilisation), bon, je pense que je n'ai pas encore tout compris sur la gestion de la batterie (couper l'écran par exemple). De plus, la caméra se met à chauffer assez vite assez fort (elle était dans un sac), rien de méchant heureusement, mais je me demande si ça ne peut pas abimer la coque à force. Du coup, je vais la garder et m'en servir pour faire tout ce que je n'ose pas faire avec mon réflex (sous l'eau, au ski…). D'un point de vue plus artistique, je pense qu'il y a moyen de faire des trucs sympas avec le grand angle et les modes timelapses. Il y aura surement un autre retour, quand j'aurai une meilleure connaissance des performances de la chose. Stay tuned .","tags":"Revue","title":"Découverte de la GoPro Hero 4"},{"url":"http://true.falce.net/bonjour-le-monde.html","text":"Salut Le tout premier article, de mon tout premier blog. Espérons qu'il y en aura beaucoup d'autres dans le futur :) Je pense que la plupart des articles sera en français. Pourquoi ? 2 raisons. D'une je n'écrit pas souvent, autant que ça soit dans ma langue maternelle, et puis, la subtilité, les jeux de mots, ça n'a pas de prix. Et surtout, on peut surement trouver les mêmes choses en anglais, mais pas forcément en français, alors autant servir à dynamiser une communauté… On parlera d'un peu de tout, en particulier : de choses geeks de choses techniques de sciences (surtout de la bio-info) Et comme j'aime bien râler, il y aura aussi des coups de gueule. A bientôt.","tags":"Autre","title":"Bonjour le monde"}]}